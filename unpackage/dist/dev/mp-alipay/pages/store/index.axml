<view class="hx-store"><view class="page"><fly-in-cart vue-id="3a3d7ffe-1" cartBasketRect="{{cartBasketRect}}" ref="__r" data-ref="inCart" onVueInit="__l"></fly-in-cart><view class="header" style="{{'height:'+(CustomBar+120+'px')+';'}}"><view class="{{(('bgImage')+' '+(store.bgImage?'':'bg-blue'))}}" style="{{'width:100%;'+('height:'+(CustomBar+30+'px')+';')}}"><block a:if="{{store.bgImage}}"><image style="{{'width:100%;'+('height:'+(CustomBar+30+'px')+';')}}" src="{{store.bgImage}}"></image></block><view class="mask"></view></view><view class="bg-white" style="height:90px;width:100%;"></view><view class="top"><view class="cu-bar text-white" style="{{(barHeight)}}"><view data-event-opts="{{[['tap',[['BackPage',['$event']]]]]}}" class="action" onTap="__e"></view></view><view class="margin-lr margin-top-sm padding-sm bg-white shadow radius10" style="width:690rpx;"><view class="flex justify-between"><view style="width:100rpx;height:100rpx;"><image style="width:100rpx;height:100rpx;border-radius:8rpx;" lazy-load="true" mode="aspectFit" src="{{store.imgUrl}}"></image></view><view class="margin-left-sm" style="width:410rpx;"><view class="text-black text-bold text-xl">{{store.name}}</view><view class="text-grey text-sm padding-tb-xs"><text class="cuIcon-favorfill text-orange"></text><text>{{store.grade[0]}}</text><text class="margin-lr-sm">|</text><text>{{"配送约"+store.averageTime+"分钟"}}</text></view></view><view class="text-center" style="width:120rpx;"><button class="cu-btn round line-black" role="button" aria-disabled="false">关注</button></view></view><view class="text-grey text-sm margin-top-xs"><text>{{"公告："+store.notice}}</text></view></view></view></view><scroll-view class="bg-white nav" scroll-x scroll-left="0"><view class="flex cu-bar search border-bottom"><view class="flex align-center" style="width:500rpx;"><block a:for="{{tabList}}" a:for-item="item" a:for-index="index" a:key="index"><view class="cu-item" style="position:relative;" data-id="{{index}}" data-event-opts="{{[['tap',[['tabSelect',['$event']]]]]}}" onTap="__e"><view class="{{(tabCur==index?'text-blue':'')}}">{{tabList[index]}}</view><view class="{{(tabCur==index?'cur':'')}}"></view></view></block></view><view class="search-form round"><text class="cuIcon-search text-grey text-sxl"></text><input type="text" placeholder="搜索" confirm-type="search"/></view></view></scroll-view><block a:if="{{tabCur==0}}"><view><view class="flex"><scroll-view class="VerticalNav bg-f8 nav" style="{{(style)}}" scroll-y scroll-with-animation scroll-top="{{verticalNavTop}}"><block a:for="{{categoryList}}" a:for-item="item" a:for-index="index" a:key="index"><view class="{{(('cu-item text-df')+' '+(index==vTabCur?'text-appcolor bg-white text-bold':''))}}" data-id="{{index}}" data-event-opts="{{[['tap',[['vTabSelect',['$event']]]]]}}" onTap="__e">{{''+item.name+''}}<block a:if="{{item.number}}"><text class="allcount">{{''+item.number+''}}</text></block></view></block><view style="height:70px;"></view></scroll-view><scroll-view class="bg-white padding-sm" style="{{'flex:1;'+(style)}}" scroll-y scroll-with-animation scroll-into-view="{{'main-'+mainCur}}" data-event-opts="{{[['scroll',[['VerticalMain',['$event']]]]]}}" onScroll="__e"><block a:for="{{categoryList}}" a:for-item="item" a:for-index="index" a:key="index"><view id="{{'main-'+index}}"><view class="text-black text-bold margin-bottom-xs">{{item.name}}</view><block a:for="{{goodsList}}" a:for-item="rowData" a:for-index="i" a:key="i"><block a:if="{{item.id==rowData.type_id}}"><view class="flex margin-bottom-sm" style="width:550rpx;"><view class="margin-right-sm" style="width:160rpx;height:160rpx;overflow:hidden;"><image style="width:160rpx;height:160rpx;border-radius:10rpx;" lazy-load="true" src="{{rowData.img}}"></image></view><view class="flexd" style="width:370rpx;"><view><view class="text-lg text-black text-bold">{{rowData.name}}</view><view class="text-sm text-cut margin-top-xs"><text>{{rowData.introduction}}</text><text>{{rowData.descripe}}</text></view><view class="text-gray margin-top-xs"><text class="text-sm">{{"月销"+rowData.sales}}</text><text class="margin-left-sm text-sm">{{"好评"+rowData.rate+"%"}}</text></view></view><view><view class="flex justify-between"><view class="margin-top-xs"><block a:if="{{rowData.form}}"><block><view class="text-grey"><text class="text-price text-orange margin-right-sm">{{''+rowData.form_child[0].price+''}}</text><block a:if="{{rowData.form_child[0].oldprice}}"><text class="text-price text-grey text-strikethrough">{{'￥'+rowData.form_child[0].oldprice+''}}</text></block></view></block></block><block a:else><block><view class="text-grey"><text class="text-price text-orange margin-right-sm">{{''+rowData.price+''}}</text><block a:if="{{rowData.oldprice}}"><text class="text-price text-grey text-strikethrough">{{'￥'+rowData.oldprice+''}}</text></block></view></block></block></view><view><block a:if="{{rowData.form}}"><block><view data-event-opts="{{[['tap',[['showForm',['$0'],[[['goodsList','',i]]]]]]]}}" class="miniBtn" onTap="__e"><text>选规格</text></view></block></block><block a:else><block><view class="{{(('jumpPosition')+' '+('addEle_'+i))}}"></view><hx-number-box vue-id="{{'3a3d7ffe-2-'+index+'-'+i}}" value="{{rowData.number}}" rowData="{{rowData}}" clickTime="{{animaTime}}" data-event-opts="{{[['^change',[['addGoodsChange']]],['^addChange',[['touchOnAddGoods',['.addEle_'+i,'$0'],[[['goodsList','',i]]]]]]]}}" onChange="__e" onAddChange="__e" onVueInit="__l"></hx-number-box></block></block></view></view></view></view></view></block></block></view></block><view style="height:60px;"></view></scroll-view></view></view></block><block a:if="{{tabCur==1}}"><view><scroll-view style="height:100%;width:100%;background-color:#ffffff;" scroll-y="{{goodsBoxScroll}}" data-event-opts="{{[['scroll',[['asideScroll',['$event']]]]]}}" onScroll="__e"><view class="scroll-items evaluate-box"><view class="evaluate-box-header"></view><view class="evaluate-box-body"></view><hx-comment vue-id="3a3d7ffe-3" listData="{{commentList}}" onVueInit="__l"></hx-comment></view></scroll-view></view></block><block a:if="{{tabCur==2}}"><view class="swiper-item"></view></block><block a:if="{{showFoot}}"><view data-event-opts="{{[['touchMove',[['mpClear',['$event']]]]]}}" class="foot" style="{{'height:'+(footHeight)+';'}}" catchTouchMove="__e"><view data-event-opts="{{[['tap',[['hideShoppingCar',['$event']]]]]}}" class="zz" onTap="__e"></view><view class="btn-box"><view data-event-opts="{{[['tap',[['contact',['$event']]]]]}}" class="btn-box-left" onTap="__e"><view class="imgBox"><image src="../../static/store/contact.png" mode="aspectFit"></image></view><text>联系商家</text></view><view class="btn-box-line"></view><view data-event-opts="{{[['tap',[['showShoppingCar',['$event']]]]]}}" class="btn-box-center" onTap="__e"><view class="cart" animation="{{cartAnimationData}}"><block a:if="{{goodsTotalNumber>0}}"><view class="tag cartNum">{{goodsTotalNumber}}</view></block><image src="{{goodsTotalNumber?'/static/store/cart.png':'/static/store/cart2.png'}}" mode="aspectFit"></image></view><view class="padding-sm"><block a:if="{{goodsTotalPrice>0}}"><view class="text-xl text-white">{{'￥'+goodsTotalPrice+''}}</view></block><view class="text-xs text-gray">{{'另需配送费￥'+shippingDees+''}}</view></view></view><view class="btn-box-right"><block a:if="{{goodsTotalPrice>0&&goodsTotalPrice>=startingPrice}}"><view data-event-opts="{{[['tap',[['jiesuan',['$event']]]]]}}" class="jiesuan" onTap="__e">去结算</view></block><block a:else><view class="pscj text-xs text-gray"><block a:if="{{startingPrice>0}}"><text>{{"差￥"+-(goodsTotalPrice-startingPrice)+"起送"}}</text></block></view></block></view></view><view class="cart-box" style="{{'display:'+(showCar?'flex':'none')+';'}}"><block a:if="{{showDiscount}}"><view class="box-container rebate-box"><text>已享100减25</text></view></block><view class="box-container operating-box"><view class="operating-box_right">{{'包装费￥'+goodsTotalPacking+''}}</view><view data-event-opts="{{[['tap',[['clearShoppingCart',['$event']]]]]}}" class="operating-box_left clear" onTap="__e"><text class="cuIcon-delete"></text><text>清空购物车</text></view></view><view class=" goods-box"><view style="flex:1;"><scroll-view class="goods-list-scroll" scroll-y="true" scroll-top="{{carGoodsScrollTop}}"><view class="goods-list"><block a:for="{{shoppCart}}" a:for-item="rowData" a:for-index="i" a:key="i"><block a:if="{{rowData.number>0}}"><view class="box"><view class="m-store-item"><view class="m-img"><image style="width:100%;height:100%;" src="{{rowData.img}}" mode="aspectFit"></image></view><view class="m-text"><view class="m-title">{{''+rowData.name+''}}</view><view class="m-descripe">{{''+(rowData.current_form?rowData.form.name+"："+rowData.current_form.name:rowData.descripe)+''}}</view><view class="m-price-box"><view class="symbol">￥</view><view class="m-price">{{rowData.price}}</view><block a:if="{{rowData.oldprice}}"><view class="m-old-price"><text>{{"￥"+rowData.oldprice}}</text></view></block></view><view class="m-distance"><view class="{{(('jumpPosition')+' '+('addEle2_'+rowData.id))}}"></view><hx-number-box vue-id="{{'3a3d7ffe-4-'+i}}" value="{{rowData.number}}" rowData="{{rowData}}" clickTime="{{animaTime}}" data-event-opts="{{[['^change',[['addGoodsChange']]],['^addChange',[['touchOnAddGoods',['.addEle2_'+rowData.id,'$0'],[[['shoppCart','',i]]]]]]]}}" onChange="__e" onAddChange="__e" onVueInit="__l"></hx-number-box></view></view></view></view></block></block></view></scroll-view></view></view></view></view></block><uni-popup vue-id="3a3d7ffe-5" type="center" ref="__r" data-ref="popup" data-event-opts="{{[['^change',[['popupChange']]]]}}" onChange="__e" onVueInit="__l"><block a:if="{{currentGoodsData.name}}"><view class="form-main"><view data-event-opts="{{[['tap',[['mpClear',['$event']]]]]}}" class="form-main_ctn" catchTap="__e"><view class="godos_tit"><text>{{currentGoodsData.name}}</text></view><view class="gg_tit"><text>{{currentGoodsData.form.name}}</text></view><view class="gg_box"><block a:for="{{currentGoodsData.form_child}}" a:for-item="form_child" a:for-index="index" a:key="id"><block a:if="{{form_child.pid==currentGoodsData.form.id}}"><block><view data-event-opts="{{[['tap',[['selectGoodsForm',['$0','$1'],['currentGoodsData',[['currentGoodsData.form_child','id',form_child.id]]]]]]]}}" class="{{(('item')+' '+((form_child.select)?'active':''))}}" onTap="__e">{{form_child.name}}</view></block></block></block></view><view class="select_gg"><text class="lable">已选规格：</text><view class="select_gg_box"><block a:for="{{currentGoodsData.form_child}}" a:for-item="form_child" a:for-index="index" a:key="id"><block a:if="{{form_child.select==true}}"><block><view class="gg-item"><text>{{form_child.name+''}}</text><text class="gg-item-cut">,</text></view></block></block></block></view></view><view class="bottom"><view class="price_box"><text>￥</text><block a:for="{{currentGoodsData.form_child}}" a:for-item="form_child" a:for-index="i" a:key="i"><block a:if="{{form_child.select==true}}"><block><text class="price">{{form_child.price}}</text></block></block></block></view><view class="form-btn-box"><block a:if="{{!currentGoodsData.number}}"><block><view class="add-btn" id="ggAddBtn" data-event-opts="{{[['tap',[['formFirstAddGoods']]]]}}" onTap="__e"><view class="hxicon-add _i" id="eleAdd"></view><text>加入购物车</text></view></block></block><block a:else><block><view class="addEle_gg jumpPosition"></view><hx-number-box vue-id="{{('3a3d7ffe-6')+','+('3a3d7ffe-5')}}" value="{{currentGoodsData.number}}" rowData="{{currentGoodsData}}" clickTime="{{animaTime+200}}" data-event-opts="{{[['^change',[['formAddGoodsChange']]],['^addChange',[['touchOnAddGoods',['.addEle_gg','$0'],['currentGoodsData']]]]]}}" onChange="__e" onAddChange="__e" onVueInit="__l"></hx-number-box></block></block></view></view></view><view data-event-opts="{{[['tap',[['hiddenForm']]]]}}" class="close" onTap="__e"><view class="hxicon-close _i"></view></view></view></block></uni-popup></view></view>