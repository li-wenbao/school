<view class="hx-store"><view class="page"><fly-in-cart class="vue-ref" vue-id="79017e2a-1" cartBasketRect="{{cartBasketRect}}" data-ref="inCart" bind:__l="__l"></fly-in-cart><view class="header" style="{{'height:'+(CustomBar+120+'px')+';'}}"><view class="{{['bgImage',store.bgImage?'':'bg-blue']}}" style="{{'width:100%;'+('height:'+(CustomBar+30+'px')+';')}}"><block wx:if="{{store.bgImage}}"><image style="{{'width:100%;'+('height:'+(CustomBar+30+'px')+';')}}" src="{{store.bgImage}}"></image></block><view class="mask"></view></view><view class="bg-white" style="height:90px;width:100%;"></view><view class="top"><view class="cu-bar text-white" style="{{(barHeight)}}"><view data-event-opts="{{[['tap',[['BackPage',['$event']]]]]}}" class="action" bindtap="__e"><text class="cuIcon-back"></text></view></view><view class="margin-lr margin-top-sm padding-sm bg-white shadow radius10" style="width:690rpx;"><view class="flex justify-between"><view style="width:100rpx;height:100rpx;"><image style="width:100rpx;height:100rpx;border-radius:8rpx;" lazy-load="true" mode="aspectFit" src="{{store.imgUrl}}"></image></view><view class="margin-left-sm" style="width:410rpx;"><view class="text-black text-bold text-xl">{{store.name}}</view><view class="text-grey text-sm padding-tb-xs"><text class="cuIcon-favorfill text-orange"></text><text>{{store.grade[0]}}</text><text class="margin-lr-sm">|</text><text>{{"配送约"+store.averageTime+"分钟"}}</text></view></view><view class="text-center" style="width:120rpx;"><button class="cu-btn round line-black" role="button" aria-disabled="false">关注</button></view></view><view class="text-grey text-sm margin-top-xs"><text>{{"公告："+store.notice}}</text></view></view></view></view><scroll-view class="bg-white nav" scroll-x scroll-left="0"><view class="flex cu-bar search border-bottom"><view class="flex align-center" style="width:500rpx;"><block wx:for="{{tabList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="cu-item" style="position:relative;" data-id="{{index}}" data-event-opts="{{[['tap',[['tabSelect',['$event']]]]]}}" bindtap="__e"><view class="{{[tabCur==index?'text-blue':'']}}">{{tabList[index]}}</view><view class="{{[tabCur==index?'cur':'']}}"></view></view></block></view><view class="search-form round"><text class="cuIcon-search text-grey text-sxl"></text><input type="text" placeholder="搜索" confirm-type="search"/></view></view></scroll-view></view><view class="main" style="{{'height:'+(mainHeight)+';'}}"><swiper style="height:100%;" id="mainSwiper" current="{{swiperCurrent}}" duration="{{transtionTime}}" data-event-opts="{{[['transition',[['transition',['$event']]]],['animationfinish',[['animationfinish',['$event']]]]]}}" bindtransition="__e" bindanimationfinish="__e"><swiper-item class="swiper-item"><view class="flex"><scroll-view class="VerticalNav bg-f8 nav" style="{{(style)}}" scroll-y scroll-with-animation scroll-top="{{verticalNavTop}}"><block wx:for="{{categoryList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['cu-item text-df',index==vTabCur?'text-appcolor bg-white text-bold':'']}}" data-id="{{index}}" data-event-opts="{{[['tap',[['vTabSelect',['$event']]]]]}}" bindtap="__e">{{''+item.name+''}}<block wx:if="{{item.number}}"><text class="allcount">{{''+item.number+''}}</text></block></view></block></scroll-view><scroll-view class="bg-white padding-sm" style="{{'flex:1;'+(style)}}" scroll-y scroll-with-animation scroll-into-view="{{'main-'+mainCur}}" data-event-opts="{{[['scroll',[['VerticalMain',['$event']]]]]}}" bindscroll="__e"><block wx:for="{{categoryList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view id="{{'main-'+index}}"><view class="text-black text-bold margin-bottom-xs">{{item.name}}</view><block wx:for="{{goodsList}}" wx:for-item="rowData" wx:for-index="i" wx:key="i"><block wx:if="{{item.id==rowData.type_id}}"><view class="flex margin-bottom-sm" style="width:550rpx;"><view class="margin-right-sm" style="width:160rpx;height:160rpx;overflow:hidden;"><image style="width:160rpx;height:160rpx;border-radius:10rpx;" mode="scaleToFill" lazy-load="true" src="{{rowData.img}}"></image></view><view class="flexd" style="width:370rpx;"><view><view class="text-lg text-black text-bold">{{rowData.name}}</view><view class="text-sm text-cut margin-top-xs"><text>{{rowData.introduction}}</text><text>{{rowData.descripe}}</text></view><view class="text-gray margin-top-xs"><text class="text-sm">{{"月销"+rowData.sales}}</text><text class="margin-left-sm text-sm">{{"好评"+rowData.rate+"%"}}</text></view></view><view><view class="flex justify-between"><view class="margin-top-xs"><block wx:if="{{rowData.form}}"><block><view class="text-grey"><text class="text-price text-orange margin-right-sm">{{''+rowData.form_child[0].price+''}}</text><block wx:if="{{rowData.form_child[0].oldprice}}"><text class="text-price text-grey text-strikethrough">{{'￥'+rowData.form_child[0].oldprice+''}}</text></block></view></block></block><block wx:else><block><view class="text-grey"><text class="text-price text-orange margin-right-sm">{{''+rowData.price+''}}</text><block wx:if="{{rowData.oldprice}}"><text class="text-price text-grey text-strikethrough">{{'￥'+rowData.oldprice+''}}</text></block></view></block></block></view><view><block wx:if="{{rowData.form}}"><block><view data-event-opts="{{[['tap',[['showForm',['$0'],[[['goodsList','',i]]]]]]]}}" class="miniBtn" bindtap="__e"><text>选规格</text></view></block></block><block wx:else><block><view class="{{['jumpPosition','addEle_'+i]}}"></view><hx-number-box vue-id="{{'79017e2a-2-'+index+'-'+i}}" value="{{rowData.number}}" rowData="{{rowData}}" clickTime="{{animaTime}}" data-event-opts="{{[['^change',[['addGoodsChange']]],['^addChange',[['touchOnAddGoods',['.addEle_'+i,'$0'],[[['goodsList','',i]]]]]]]}}" bind:change="__e" bind:addChange="__e" bind:__l="__l"></hx-number-box></block></block></view></view></view></view></view></block></block></view></block><view class="bg-white" style="height:40px;"></view></scroll-view></view></swiper-item><swiper-item class="swiper-item"><scroll-view style="height:100%;width:100%;background-color:#ffffff;" scroll-y="{{goodsBoxScroll}}" data-event-opts="{{[['scroll',[['asideScroll',['$event']]]]]}}" bindscroll="__e"><view class="scroll-items evaluate-box"><view class="evaluate-box-header"></view><view class="evaluate-box-body"></view><hx-comment vue-id="79017e2a-3" listData="{{commentList}}" bind:__l="__l"></hx-comment></view></scroll-view></swiper-item><swiper-item class="swiper-item"><view class="scroll-items business-box"><view class="info-list hx-mt-15"><view class="info-list-container"><view class="hxicon-location _i"></view><text>{{storeData.address}}</text></view></view><view class="info-list hx-mt-15 "><view class="info-list-container hx-bb"><view class="hxicon-time _i"></view><text>{{"配送时间："+storeData.delivery_time}}</text></view></view><view class=" info-list"><view data-event-opts="{{[['tap',[['goCall',['$0'],['storeData.telephone']]]]]}}" class="info-list-container" bindtap="__e"><view class="hxicon-phone _i"></view><text style="flex:1;">{{"商家电话："+storeData.telephone}}</text><view class="right"><text>拨打</text><view class="hxicon-right _i"></view></view></view></view><view class="info-list hx-mt-15"><view data-event-opts="{{[['tap',[['showStoreBoxFunc',['$event']]]]]}}" class="info-list-container" bindtap="__e"><view class="hxicon-new _i" style="color:#ff3333;"></view><text style="flex:1;">商家当前热门活动</text><view class="right"><text>查看</text><view class="hxicon-right _i"></view></view></view></view></view></swiper-item></swiper></view><block wx:if="{{showFoot}}"><view data-event-opts="{{[['touchmove',[['mpClear',['$event']]]]]}}" class="foot" style="{{'height:'+(footHeight)+';'}}" catchtouchmove="__e"><view data-event-opts="{{[['tap',[['hideShoppingCar',['$event']]]]]}}" class="zz" bindtap="__e"></view><view class="btn-box"><view data-event-opts="{{[['tap',[['contact',['$event']]]]]}}" class="btn-box-left" bindtap="__e"><view class="imgBox"><image src="../../static/car.png" mode></image></view><text>联系商家</text></view><view class="btn-box-line"></view><view data-event-opts="{{[['tap',[['showShoppingCar',['$event']]]]]}}" class="btn-box-center" bindtap="__e"><view class="cart" animation="{{cartAnimationData}}"><block wx:if="{{goodsTotalNumber>0}}"><view class="tag cartNum">{{goodsTotalNumber}}</view></block><image src="{{goodsTotalNumber?'/static/store/cart.png':'/static/store/cart2.png'}}" mode></image></view><view class="priceBox"><block wx:if="{{goodsTotalPrice>0}}"><view class="hx-txt-18 hx-color-white">{{'￥'+goodsTotalPrice+''}}</view></block><view class="hx-txt-10 hx-color-gray">{{'另需配送费￥'+shippingDees+''}}</view></view></view><view class="btn-box-right"><block wx:if="{{goodsTotalPrice>0&&goodsTotalPrice>=startingPrice}}"><view data-event-opts="{{[['tap',[['jiesuan',['$event']]]]]}}" class="jiesuan" bindtap="__e">去结算</view></block><block wx:else><view class="pscj hx-txt-10 hx-color-gray"><block wx:if="{{startingPrice>0}}"><text>{{"差￥"+-(goodsTotalPrice-startingPrice)+"起送"}}</text></block></view></block></view></view><view class="cart-box" style="{{'display:'+(showCar?'flex':'none')+';'}}"><block wx:if="{{showDiscount}}"><view class="box-container rebate-box"><text>已享100减25</text></view></block><view class="box-container operating-box"><view class="operating-box_right"></view><view data-event-opts="{{[['tap',[['clearShoppingCart',['$event']]]]]}}" class="operating-box_left clear" bindtap="__e"><view class="hxicon-delete _i"></view><text>清空购物车</text></view></view><view class=" goods-box"><view style="flex:1;"><scroll-view class="goods-list-scroll" scroll-y="true" scroll-top="{{carGoodsScrollTop}}"><view class="goods-list"><block wx:for="{{shoppCart}}" wx:for-item="rowData" wx:for-index="i" wx:key="i"><block wx:if="{{rowData.number>0}}"><view class="box"><view class="m-store-item"><view class="m-img"><image style="width:100%;height:100%;" src="{{rowData.img}}" mode="aspectFit"></image></view><view class="m-text"><view class="m-title">{{''+rowData.name+''}}</view><view class="m-descripe">{{''+(rowData.current_form?rowData.form.name+"："+rowData.current_form.name:rowData.descripe)+''}}</view><view class="m-price-box"><view class="symbol">￥</view><view class="m-price">{{rowData.price}}</view><block wx:if="{{rowData.oldprice}}"><view class="m-old-price"><text>{{"￥"+rowData.oldprice}}</text></view></block></view><view class="m-distance"><view class="{{['jumpPosition','addEle2_'+rowData.id]}}"></view><hx-number-box vue-id="{{'79017e2a-4-'+i}}" value="{{rowData.number}}" rowData="{{rowData}}" clickTime="{{animaTime}}" data-event-opts="{{[['^change',[['addGoodsChange']]],['^addChange',[['touchOnAddGoods',['.addEle2_'+rowData.id,'$0'],[[['shoppCart','',i]]]]]]]}}" bind:change="__e" bind:addChange="__e" bind:__l="__l"></hx-number-box></view></view></view></view></block></block></view></scroll-view></view></view></view></view></block><uni-popup class="vue-ref" vue-id="79017e2a-5" type="center" data-ref="popup" data-event-opts="{{[['^change',[['popupChange']]]]}}" bind:change="__e" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{currentGoodsData.name}}"><view class="form-main"><view data-event-opts="{{[['tap',[['mpClear',['$event']]]]]}}" class="form-main_ctn" catchtap="__e"><view class="godos_tit"><text>{{currentGoodsData.name}}</text></view><view class="gg_tit"><text>{{currentGoodsData.form.name}}</text></view><view class="gg_box"><block wx:for="{{currentGoodsData.form_child}}" wx:for-item="form_child" wx:for-index="index" wx:key="id"><block wx:if="{{form_child.pid==currentGoodsData.form.id}}"><block><view data-event-opts="{{[['tap',[['selectGoodsForm',['$0','$1'],['currentGoodsData',[['currentGoodsData.form_child','id',form_child.id]]]]]]]}}" class="{{['item',(form_child.select)?'active':'']}}" bindtap="__e">{{form_child.name}}</view></block></block></block></view><view class="select_gg"><text class="lable">已选规格：</text><view class="select_gg_box"><block wx:for="{{currentGoodsData.form_child}}" wx:for-item="form_child" wx:for-index="index" wx:key="id"><block wx:if="{{form_child.select==true}}"><block><view class="gg-item"><text>{{form_child.name+''}}</text><text class="gg-item-cut">,</text></view></block></block></block></view></view><view class="bottom"><view class="price_box"><text>￥</text><block wx:for="{{currentGoodsData.form_child}}" wx:for-item="form_child" wx:for-index="i" wx:key="i"><block wx:if="{{form_child.select==true}}"><block><text class="price">{{form_child.price}}</text></block></block></block></view><view class="form-btn-box"><block wx:if="{{!currentGoodsData.number}}"><block><view class="add-btn" id="ggAddBtn" data-event-opts="{{[['tap',[['formFirstAddGoods']]]]}}" bindtap="__e"><view class="hxicon-add _i" id="eleAdd"></view><text>加入购物车</text></view></block></block><block wx:else><block><view class="addEle_gg jumpPosition"></view><hx-number-box vue-id="{{('79017e2a-6')+','+('79017e2a-5')}}" value="{{currentGoodsData.number}}" rowData="{{currentGoodsData}}" clickTime="{{animaTime+200}}" data-event-opts="{{[['^change',[['formAddGoodsChange']]],['^addChange',[['touchOnAddGoods',['.addEle_gg','$0'],['currentGoodsData']]]]]}}" bind:change="__e" bind:addChange="__e" bind:__l="__l"></hx-number-box></block></block></view></view></view><view data-event-opts="{{[['tap',[['hiddenForm']]]]}}" class="close" bindtap="__e"><view class="hxicon-close _i"></view></view></view></block></uni-popup></view>